<!DOCTYPE HTML>
<html>

<head>
	<title>Homepage</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content="" />
	<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>

	<!-- Bootstrap Core CSS -->
	<link href="../static/css/bootstrap.css" rel='stylesheet' type='text/css' />

	<!-- Custom CSS -->
	<link href="../static/css/style.css" rel='stylesheet' type='text/css' />

	<!-- font-awesome icons CSS -->
	<link href="../static/css/font-awesome.css" rel="stylesheet">
	<!-- //font-awesome icons CSS -->

	<!-- side nav css file -->
	<link href='../static/css/SidebarNav.min.css' media='all' rel='stylesheet' type='text/css' />
	<!-- side nav css file -->

	<!-- js-->
	<script src="../static/js/modernizr.custom.js"></script>

	<!--webfonts-->
	<link href="http://fonts.googleapis.com/css?family=PT+Sans:400,400i,700,700i&amp;subset=cyrillic,cyrillic-ext,latin-ext"
	 rel="stylesheet">
	<!--//webfonts-->

	<!-- Metis Menu -->
	<script src="../static/js/metisMenu.min.js"></script>
	<script src="../static/js/custom.js"></script>
	<link href="../static/css/custom.css" rel="stylesheet">
	<!--//Metis Menu -->

	<script src="../static/js/modernizr.js"></script>
	<!-- SLIDER REVOLUTION 4.x CSS SETTINGS
<link rel="stylesheet" type="text/css" href="rs-plugin/rs-plugin/css/settings.css" media="screen" /> -->

	<!-- Bootstrap Core CSS -->
	<link href="../static/css/bootstrap.min.css" rel="stylesheet">
	<!-- Custom CSS -->
	<link href="../static/css/font-awesome.min.css" rel="stylesheet" type="text/css">
	<link href="../static/css/ionicons.min.css" rel="stylesheet">
	<link href="../static/css/main.css" rel="stylesheet">
	<link href="../static/css/style2.css" rel="stylesheet">
	<link href="../static/css/responsive.css" rel="stylesheet">

	<!-- COLORS -->
	<link rel="stylesheet" id="color" href="../static/css/default.css">
	<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
	 crossorigin="anonymous">
	</script>
</head>

<body class="cbp-spmenu-push" onload="show_status()">
	<div class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-left main-menu" id="cbp-spmenu-s1">
		<!--left-fixed -navigation-->
		<aside class="sidebar-left">
			<nav class="navbar navbar-inverse">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".collapse" aria-expanded="false">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<h1><a class="navbar-brand" href="#"><span class="fa fa-database"></span> Review <span class="dashboard_text">Analysis
								System</span></a></h1>
				</div>
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
					<ul class="sidebar-menu">
						<li class="treeview">
							<a href="homepage">
								<i class="fa fa-home"></i> <span>Homepage</span>
							</a>
						</li>
						<li class="treeview">
							<a href="background">
								<i class="fa fa-book"></i> <span>Background</span>
							</a>
						</li>
						<li class="treeview">
							<a href="upload">
								<i class="fa fa-upload"></i> <span>Upload Database</span>
							</a>
						</li>
						<li class="treeview">
							<a href="status">
								<i class="fa fa-book"></i> <span>Database Status</span>
							</a>
						</li>
						<li class="treeview">
							<a href="analysis">
								<i class="fa fa-bar-chart"></i> <span>Analysis</span>
							</a>
						</li>
						<li class="treeview">
							<a href="recommendation">
								<i class="fa fa-thumbs-o-up"></i> <span>Recommendation</span>
							</a>
						</li>
						<li class="treeview">
							<a href="acknowledge">
								<i class="fa fa-book"></i> <span>Acknowledge</span>
							</a>
						</li>
					</ul>
				</div>
				<!-- /.navbar-collapse -->
			</nav>
		</aside>
	</div>
	<!--left-fixed -navigation-->
	<div id="report" class="heading text-center" style="margin-left: 20%; margin-top: 60px; margin-right: 100px;">
		<h4 style="color: #252525;font-size: 24px;">Database Snapshot</h4>
		<hr>
	</div>
	<div style="margin-left: 20%;display: none;" id="oops">
		<div class="col-sm-5">
			<img src="../static/images/oops.png" class="img-responsive" alt="">
		</div>
		<div class="col-sm-6" style="margin-top: 100px;">
			<h3 style="text-transform:none;font-size:28px;color:#888888;margin-left: 10%;">The database haven't been created.</h3>
			<div style="font-size:28px;color:#888888; margin-left: 10%; ">Quick Start With &nbsp;&nbsp;<a href="upload" class="btn">Upload
					Database Now</a></div>
		</div>
	</div>
	<!-- <div id="db_info" class="col-sm-12" style="margin-left: 20%;display:none;margin-bottom: 100px;">

	</div> -->
	<div class="col-sm-7" id="db_info" style="display:none;margin-left: 20%;margin-right: 40px;">
		<h4>Database Information:</h4>
		<div class="bs-example" style="font-size:20px;">
			<table class="table">
				<tbody id="db_info_items">
				</tbody>
			</table>
		</div>
	</div>

	<div class="col-sm-8" id="coll_info" style="display:none;margin-top: 70px; margin-left: 20%;margin-right: 40px;">
		<h4>Collections Information:</h4>
		<div class="bs-example widget-shadow">
			<table class="table">
				<thead>
					<tr id="coll_info_title">
						<th>Name</th>
						<th>Primary Key</th>
						<th>Records Number</th>
						<th>Table Size</th>
					</tr>
				</thead>
				<tbody id="coll_info_result">
				</tbody>
			</table>
		</div>
	</div>
	<script>
		function show_status() {
			$.ajax({
				type: "POST",
				url: "/status_content",
				dataType: "json",
				contentType: "application/json",
				data: JSON.stringify(""),
				success: function (data, status) {
					var info = data;
					if (info["error"]) {
						var error = document.getElementById("oops");
						error.style.display = "block";
					}
					else {
						// var div_db = document.createElement("div");
						// div_db.className = "widget-shadow";
						// var title_db = document.createElement("div");
						// title_db.className = "form-title";
						// var body_db = document.createElement("div");
						// body_db.className = "form-body";
						// var title_db_h = document.createElement("h4");
						// title_db_h.style = "text-transform:none;";
						// var title_db_content = document.createTextNode("Database Information");
						// title_db_h.appendChild(title_db_content);
						// title_db.appendChild(title_db_h);
						// for (var key in info["Database"]) {
						// 	var content = document.createTextNode(key + ": " + String(info["Database"][key]));
						// 	var item = document.createElement("h5");
						// 	item.style = "text-transform:none;";
						// 	item.appendChild(content);
						// 	body_db.appendChild(item);
						// }
						// div_db.appendChild(title_db);
						// div_db.appendChild(body_db)
						// var db_info = document.getElementById("db_info");
						// db_info.appendChild(div_db);

						// var div_collection = document.createElement("div");
						// div_collection.className = "widget-shadow";
						// var title_collection = document.createElement("div");
						// title_collection.className = "form-title";
						// var body_collection = document.createElement("div");
						// body_collection.className = "form-body";
						// var title_collection_h = document.createElement("h4");
						// title_collection_h.style = "text-transform:none;";
						// var title_collection_content = document.createTextNode("Collection Information");
						// title_collection_h.appendChild(title_collection_content);
						// title_collection.appendChild(title_collection_h);
						// for (var i = 0; i < info["Collection"]['collection_names'].length; i++) {
						// 	var coll_name = info["Collection"]['collection_names'][i];
						// 	var div_item = document.createElement("div");
						// 	div_item.className = "widget-shadow";
						// 	var title_item = document.createElement("div");
						// 	title_item.className = "form-title";
						// 	var body_item = document.createElement("div");
						// 	body_item.className = "form-body";
						// 	var title_item_h = document.createElement("h5");
						// 	title_item_h.style = "text-transform:none;";
						// 	var title_item_content = document.createTextNode(coll_name);
						// 	title_item_h.appendChild(title_item_content);
						// 	title_item.appendChild(title_item_h);
						// 	for (var key in info["Collection"][coll_name]) {
						// 		var content = document.createTextNode(key + ": " + String(info["Collection"][coll_name][key]));
						// 		var coll_item = document.createElement("h5");
						// 		coll_item.style = "text-transform:none;";
						// 		coll_item.appendChild(content);
						// 		body_item.appendChild(coll_item);
						// 	}
						// 	div_item.appendChild(title_item);
						// 	div_item.appendChild(body_item);
						// 	body_collection.appendChild(div_item);
						// }
						// div_collection.appendChild(title_collection);
						// div_collection.appendChild(body_collection);
						// db_info.appendChild(div_collection);

						// var report_title = document.getElementById("report");
						// report_title.style.display = "block";
						// db_info.style.display = "block";
						var table = document.getElementById("db_info");
						var result = document.getElementById("db_info_items");
						for (var key in info["Database"]) {
							var line = document.createElement("tr");
							var title = document.createElement("td");
							var title_content = document.createTextNode(key);
							title.appendChild(title_content);
							line.appendChild(title);
							var value = document.createElement("td");
							var value_content = document.createTextNode(info["Database"][key]);
							value.appendChild(value_content);
							line.appendChild(value);
							result.appendChild(line);
						}
						table.style.display = "block";
						var coll_table = document.getElementById("coll_info");
						var coll_result = document.getElementById("coll_info_result");
						for (var j = 0; j < info["Collection"]['collection_names'].length; j++) {
							var coll_name = info["Collection"]['collection_names'][j];
							var coll_line = document.createElement("tr");
							if(j % 2 == 1){
								coll_line.className = 'active';
							}
							var name = document.createElement("td");
							var name_content = document.createTextNode(String(info["Collection"][coll_name]['Name']));
							name.appendChild(name_content);
							coll_line.appendChild(name);
							var pk = document.createElement("td");
							var pk_content = document.createTextNode(String(info["Collection"][coll_name]['Primary Key']));
							pk.appendChild(pk_content);
							coll_line.appendChild(pk);
							var rec_num = document.createElement("td");
							var rec_num_content = document.createTextNode(String(info["Collection"][coll_name]['Records Number']));
							rec_num.appendChild(rec_num_content);
							coll_line.appendChild(rec_num);
							var table_size = document.createElement("td");
							var table_size_content = document.createTextNode(String(info["Collection"][coll_name]['Table Size']));
							table_size.appendChild(table_size_content);
							coll_line.appendChild(table_size);
							coll_result.appendChild(coll_line);
						}
						coll_table.style.display = "block";
					}
				}
			});
		}
	</script>
</body>

</html>